<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CashCrunchers Tools</title>
  <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
  <script>
    function loadGA(){
      const s=document.createElement('script');
      s.async=true;
      s.src='https://www.googletagmanager.com/gtag/js?id=G-6Q7ZTXJBC2';
      document.head.appendChild(s);
      window.dataLayer=window.dataLayer||[];
      function gtag(){dataLayer.push(arguments);}window.gtag=gtag;
      gtag('js', new Date());
      gtag('config','G-6Q7ZTXJBC2');
      document.body?.addEventListener('click',function(e){
        const link=e.target.closest('a');
        if(link&&link.href&&link.hostname!==location.hostname&&window.gtag){
          gtag('event','click',{event_category:'outbound',event_label:link.href});
        }
      });
    }
    window.addEventListener('load',function(){
      window.cookieconsent.initialise({
        palette:{popup:{background:'#000'},button:{background:'#f1d600',text:'#000'}},
        theme:'classic',
        content:{message:'We use cookies to analyse site usage.',dismiss:'Accept',link:'Learn more',href:'/privacy.html'},
        onInitialise:function(status){ if(this.hasConsented()) loadGA(); },
        onStatusChange:function(status){ if(this.hasConsented()) loadGA(); }
      });
    });
  </script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f4f7fb;
      margin: 0;
      padding: 2em;
      color: #0a0a0a;
    }
    .cc-card {
      background: white;
      padding: 2em;
      max-width: 600px;
      margin: 2em auto;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0,0,0,0.05);
    }
    .cc-group { margin-top: 1.5em; }
    .cc-group label { font-weight: 600; }
    .curr-symbol { margin-right: 0.15em; }
    .cc-subtle { color: #555; font-size: 0.9em; margin-left: 0.5em; }
    .cc-error { color: #d00; font-size: 0.9em; display: none; margin-top: 0.5em; }
    .cc-button {
      background: #007AFF;
      color: white;
      border: none;
      padding: 12px;
      width: 100%;
      border-radius: 6px;
      font-weight: 600;
      margin-top: 1.5em;
      cursor: pointer;
    }
    .results {
      display: none;
      margin-top: 2em;
      background: #e6f0ff;
      padding: 1em;
      border-radius: 8px;
    }
    .dual-input { display:flex; flex-direction:column; gap:0.5em; }
    .dual-input input[type=number] { width:100%; padding:8px; font-size:1em; border:1px solid #ccc; border-radius:4px; }
    .dual-input input[type=range] { width:100%; flex:1; }
    @media(min-width:480px){
      .dual-input{ flex-direction:row; align-items:center; }
      .dual-input input[type=number]{ max-width:120px; }
    }
    input[type=range]{ width:100%; box-sizing:border-box; }
    .cc-window.cc-banner{position:fixed;bottom:0;left:0;width:100%;}
    .cc-region { display: none; margin-top: 1em; font-size: 0.95em; }
    .cc-region a { color: #007AFF; text-decoration: none; font-weight: bold; }
    .cc-overview { font-size: 0.95em; color: #333; margin-bottom: 1em; }
  </style>
</head>
<body>

  <div class="cc-card">
    <h2>Loan-to-Value Calculator</h2>
    <p class="cc-overview">This calculator helps you estimate your Loan-to-Value ratio and home equity.</p>
    <div class="cc-group">
      <label>Estimated Property Value (<span class="curr-symbol">‚Ç¨</span>): <span class="cc-subtle" id="valueDisplay">400,000</span></label>
      <input type="range" id="ltvValue" min="50000" max="2000000" step="5000" value="400000" oninput="document.getElementById('valueDisplay').innerText = parseInt(this.value).toLocaleString(); updateCurrencyDisplays()">
    </div>
    <div class="cc-group">
      <label>Remaining Mortgage (<span class="curr-symbol">‚Ç¨</span>): <span class="cc-subtle" id="mortgageDisplay">250,000</span></label>
      <input type="range" id="ltvMortgage" min="0" max="2000000" step="5000" value="250000" oninput="document.getElementById('mortgageDisplay').innerText = parseInt(this.value).toLocaleString(); updateCurrencyDisplays()">
    </div>
    <button onclick="calculateLTV()" class="cc-button">Calculate LTV</button>
    <p id="ltvError" class="cc-error"></p>
    <div class="results" id="ltvResults">
      <p id="ltvRatio"></p>
      <p id="ltvEquity"></p>
      <div class="cc-region" id="ctaLTV"></div>
    </div>
  </div>

  <div class="cc-card">
    <h2>Mortgage Overpayment Calculator</h2>
    <p class="cc-overview">See how monthly overpayments can reduce your mortgage term and total interest paid.</p>
    <div class="cc-group">
      <label>Mortgage Balance (<span class="curr-symbol">‚Ç¨</span>): <span class="cc-subtle" id="balanceDisplay">250,000</span></label>
      <input type="range" id="balance" min="50000" max="1000000" step="1000" value="250000" oninput="document.getElementById('balanceDisplay').innerText = parseInt(this.value).toLocaleString(); updateCurrencyDisplays()">
    </div>
    <div class="cc-group">
      <label>Interest Rate (%): <span class="cc-subtle" id="rateDisplay">3.5%</span></label>
      <input type="range" id="rate" min="1" max="10" step="0.1" value="3.5" oninput="document.getElementById('rateDisplay').innerText = this.value + '%'">
    </div>
    <div class="cc-group">
      <label>Term Remaining (Years): <span class="cc-subtle" id="termDisplay">20</span></label>
      <input type="range" id="term" min="5" max="35" step="1" value="20" oninput="document.getElementById('termDisplay').innerText = this.value">
    </div>
    <div class="cc-group">
      <label>Monthly Overpayment (<span class="curr-symbol">‚Ç¨</span>): <span class="cc-subtle" id="overpayDisplay">100</span></label>
      <div class="dual-input">
        <input type="range" id="overpay" min="0" max="5000" step="10" value="100" oninput="syncOverpay(this.value)">
        <input type="number" id="overpayNum" min="0" max="5000" step="10" value="100" oninput="syncOverpay(this.value)">
      </div>
    </div>
    <button onclick="calculateOverpayment()" class="cc-button">Calculate</button>
    <p id="overpayError" class="cc-error"></p>
    <div class="results" id="resultsBox">
      <p><strong>Time Saved:</strong><br><span id="timeSaved"></span></p>
      <p><strong>Interest Saved:</strong><br><span id="interestSaved"></span></p>
      <div class="cc-region" id="ctaOverpay"></div>
    </div>
  </div>

  <div class="cc-card">
    <h2>Savings Goal Calculator</h2>
    <p class="cc-overview">Estimate how much you need to save monthly to reach your savings goal.</p>
    <div class="cc-group">
      <label>Savings Goal (<span class="curr-symbol">‚Ç¨</span>): <span class="cc-subtle" id="goalDisplay">10,000</span></label>
      <input type="range" id="goal" min="1000" max="100000" step="500" value="10000" oninput="document.getElementById('goalDisplay').innerText = parseInt(this.value).toLocaleString(); updateCurrencyDisplays()">
    </div>
    <div class="cc-group">
      <label>Months to Save: <span class="cc-subtle" id="monthsDisplay">12</span></label>
      <input type="range" id="months" min="1" max="120" step="1" value="12" oninput="document.getElementById('monthsDisplay').innerText = this.value">
    </div>
    <div class="cc-group">
      <label>Expected APR (%): <span class="cc-subtle" id="aprDisplay">3.0%</span></label>
      <input type="range" id="apr" min="0" max="10" step="0.1" value="3.0" oninput="document.getElementById('aprDisplay').innerText = this.value + '%'">
    </div>
    <button onclick="calculateSavings()" class="cc-button">Calculate</button>
    <p id="savingsError" class="cc-error"></p>
    <div class="results" id="resultsBoxSavings">
      <p id="monthlyNeeded"></p>
      <p id="totalContributed"></p>
      <p id="interestEarned"></p>
        <div class="cc-region" id="ctaSavings"></div>
    </div>
  </div>

  <script>
    const currencySymbol = {
      IE: '‚Ç¨',
      GB: '¬£',
      US: '$',
      CA: '$',
      AU: '$',
      IN: '‚Çπ',
      FR: '‚Ç¨',
      DE: '‚Ç¨',
      default: '‚Ç¨'
    };

    const ctaLinks = {
      IE: { flag: 'üáÆüá™', affiliate: true,
        mortgage: 'https://switcher.ie/mortgages',
        savings: 'https://bonkers.ie/compare-savings-accounts/',
        fire: 'https://switcher.ie/investments/',
        pension: '' },
      GB: { flag: 'üá¨üáß', affiliate: true,
        mortgage: 'https://moneyfacts.co.uk/mortgages',
        savings: 'https://moneyfacts.co.uk/savings-accounts/',
        fire: 'https://moneysavingexpert.com/savings/investment-beginners/',
        pension: '' },
      US: { flag: 'üá∫üá∏', affiliate: true,
        mortgage: 'https://nerdwallet.com/mortgages',
        savings: 'https://nerdwallet.com/best/banking/savings-accounts',
        fire: 'https://nerdwallet.com/investing/retirement/fire-movement',
        pension: '' },
      CA: { flag: 'üá®üá¶', affiliate: true,
        mortgage: 'https://ratehub.ca/mortgage-rates',
        savings: 'https://ratehub.ca/high-interest-savings-accounts',
        fire: null, pension: '' },
      AU: { flag: 'üá¶üá∫', affiliate: true,
        mortgage: 'https://mozo.com.au/home-loans',
        savings: 'https://mozo.com.au/savings-accounts',
        fire: null, pension: '' },
      FR: { flag: 'üá´üá∑', affiliate: false,
        mortgage: 'https://meilleurtaux.com/',
        savings: 'https://lelynx.fr/banque/comparateur/livret-epargne/',
        fire: null, pension: '' },
      DE: { flag: 'üá©üá™', affiliate: false,
        mortgage: 'https://check24.de/',
        savings: 'https://check24.de/tagesgeld/',
        fire: null, pension: '' },
      IN: { flag: 'üáÆüá≥', affiliate: false,
        mortgage: 'https://bankbazaar.com/home-loan.html',
        savings: 'https://bankbazaar.com/savings-account.html',
        fire: null, pension: '' },
      default: { flag: 'üåç', affiliate: false,
        mortgage: 'https://www.google.com/search?q=compare+mortgage+rates+${country_name}',
        savings: 'https://www.google.com/search?q=best+savings+accounts+${country_name}',
        fire: 'https://www.google.com/search?q=fire+movement+${country_name}',
        pension: '' }
    };

    let currSymbol = '‚Ç¨';

    fetch('https://ipapi.co/json/')
      .then(res => res.json())
      .then(data => {
        const country = data.country_code;
        const name = data.country_name || 'your region';
        currSymbol = currencySymbol[country] || currencySymbol.default;

        showCTA('mortgage', 'ctaLTV', country, name);
        showCTA('mortgage', 'ctaOverpay', country, name);
        showCTA('savings', 'ctaSavings', country, name);

        updateCurrencyDisplays();
      })
      .catch(() => {
        showCTA('mortgage', 'ctaLTV', 'default', 'your region');
        showCTA('mortgage', 'ctaOverpay', 'default', 'your region');
        showCTA('savings', 'ctaSavings', 'default', 'your region');
        updateCurrencyDisplays();
      });

    function showCTA(type, id, code, name) {
      const data = ctaLinks[code] || ctaLinks.default;
      let url = data[type];
      let flag = data.flag;
      if (!url) {
        url = ctaLinks.default[type].replace('${country_name}', encodeURIComponent(name));
        flag = ctaLinks.default.flag;
      } else {
        url = url.replace('${country_name}', encodeURIComponent(name));
      }
      if (!url) return;
      const el = document.getElementById(id);
      if (el) {
        const textMap = {
          mortgage: `Compare ${name} mortgage offers`,
          savings: `Explore ${name} savings rates`,
          fire: `Learn about FIRE in ${name}`,
          pension: `Explore ${name} pension options`
        };
        el.innerHTML = `<a href="${url}" target="_blank">${flag} ${textMap[type]}</a>`;
        el.style.display = 'block';
      }
    }

    function updateCurrencyDisplays() {
      document.querySelectorAll('.curr-symbol').forEach(el=>el.innerText=currSymbol);
      document.getElementById('valueDisplay').innerText = parseInt(document.getElementById('ltvValue').value).toLocaleString();
      document.getElementById('mortgageDisplay').innerText = parseInt(document.getElementById('ltvMortgage').value).toLocaleString();
      document.getElementById('balanceDisplay').innerText = parseInt(document.getElementById('balance').value).toLocaleString();
      document.getElementById('overpayDisplay').innerText = parseInt(document.getElementById('overpay').value).toLocaleString();
      const num=document.getElementById('overpayNum');
      if(num) num.value=document.getElementById('overpay').value;
      document.getElementById('goalDisplay').innerText = parseInt(document.getElementById('goal').value).toLocaleString();
    }

   function syncOverpay(val){
     document.getElementById('overpay').value=val;
     const num=document.getElementById('overpayNum');
     if(num) num.value=val;
      document.getElementById('overpayDisplay').innerText=parseInt(val).toLocaleString();
      updateCurrencyDisplays();
    }

    function calculateLTV() {
      const value = parseFloat(document.getElementById('ltvValue').value);
      const mortgage = parseFloat(document.getElementById('ltvMortgage').value);
      const errEl = document.getElementById('ltvError');
      errEl.style.display = 'none';
      if (!value || mortgage < 0 || mortgage > value) {
        errEl.innerText = 'Mortgage cannot exceed property value.';
        errEl.style.display = 'block';
        document.getElementById('ltvResults').style.display = 'none';
        return;
      }
      const ratio = (mortgage / value) * 100;
      const equity = value - mortgage;
      document.getElementById('ltvRatio').innerText = `Loan-to-Value Ratio: ${ratio.toFixed(2)}%`;
      document.getElementById('ltvEquity').innerText = `Home Equity: ${currSymbol}${equity.toLocaleString()}`;
      document.getElementById('ltvResults').style.display = 'block';
    }

    function calculateOverpayment() {
      const balance = parseFloat(document.getElementById('balance').value);
      const rate = parseFloat(document.getElementById('rate').value) / 100 / 12;
      const term = parseInt(document.getElementById('term').value);
      const overpay = parseFloat(document.getElementById('overpay').value);
      const errEl = document.getElementById('overpayError');
      errEl.style.display = 'none';
      if (overpay < 0 || overpay > 5000) {
        errEl.innerText = 'Overpayment must be between 0 and 5000.';
        errEl.style.display = 'block';
        document.getElementById('resultsBox').style.display = 'none';
        return;
      }
      const months = term * 12;
      const x = Math.pow(1 + rate, months);
      const monthly = (balance * x * rate) / (x - 1);
      const newMonthly = monthly + overpay;
      let currentBalance = balance;
      let monthsSaved = 0;
      let interestSaved = 0;
      for (let i = 0; i < months; i++) {
        const interest = currentBalance * rate;
        const principal = newMonthly - interest;
        currentBalance -= principal;
        interestSaved += interest;
        if (currentBalance <= 0) {
          monthsSaved = months - (i + 1);
          break;
        }
      }
      const savedTime = `${Math.floor(monthsSaved / 12)} years and ${monthsSaved % 12} months`;
      const savedMoney = interestSaved.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
      document.getElementById('timeSaved').innerText = savedTime;
      document.getElementById('interestSaved').innerText = currSymbol + savedMoney;
      document.getElementById('resultsBox').style.display = 'block';
    }

    function calculateSavings() {
      const goal = parseFloat(document.getElementById('goal').value);
      const months = parseInt(document.getElementById('months').value);
      const apr = parseFloat(document.getElementById('apr').value) / 100 / 12;
      const errEl = document.getElementById('savingsError');
      errEl.style.display = 'none';
      if (goal < 0 || months <= 0 || apr < 0) {
        errEl.innerText = 'Inputs must be positive values.';
        errEl.style.display = 'block';
        document.getElementById('resultsBoxSavings').style.display = 'none';
        return;
      }
      const monthly = goal * apr / (Math.pow(1 + apr, months) - 1);
      const totalContributed = monthly * months;
      const interestEarned = goal - totalContributed;
      document.getElementById('monthlyNeeded').innerText = `You need to save ${currSymbol}${monthly.toFixed(2)} per month.`;
      document.getElementById('totalContributed').innerText = `Total contributed: ${currSymbol}${totalContributed.toFixed(2)}`;
      document.getElementById('interestEarned').innerText = `Interest earned: ${currSymbol}${interestEarned.toFixed(2)}`;
      document.getElementById('resultsBoxSavings').style.display = 'block';
    }
  </script>
<footer style="font-size: 0.85em; color: #555; text-align: center; margin-top: 3em; padding-top: 2em; border-top: 1px solid #ddd;">
  <p>‚ö†Ô∏è These calculators are for informational purposes only and do not constitute financial advice.</p>
  <p>
    <a href="/about.html">About</a> | 
    <a href="/disclaimer.html">Disclaimer</a>
  </p>
  <p style="margin-top: 1em;">&copy; 2024 Cruncher.Money</p>
</footer>
</body>
</html>
